import { create } from 'zustand';
import { persist, createJSONStorage } from 'zustand/middleware';

export interface Translation {
  [key: string]: string | Translation;
}

export interface LanguageConfig {
  code: string;           // ISO 639-1 code
  tmdbCode: string;      // TMDb API language code (some differ from ISO)
  name: string;          // English name
  nativeName: string;    // Native name
  flag: string;          // Unicode flag emoji
  rtl?: boolean;         // Right-to-left reading direction
  region?: string;       // Preferred region for API calls
  translations: Translation;
}

// Base translations for all languages
const baseTranslations: Translation = {
  // Navigation
  movies: 'Movies',
  tvShows: 'TV Shows',
  people: 'People',
  search: 'Search movies, TV shows, people...',
  
  // Home page
  trendingMovies: 'Trending Movies',
  popularMovies: 'Popular Movies',
  trendingTVShows: 'Trending TV Shows',
  upcomingMovies: 'Upcoming Movies',
  topRatedMovies: 'Top Rated Movies',
  nowPlaying: 'Now Playing',
  
  // Categories
  popular: 'Popular',
  topRated: 'Top Rated',
  trending: 'Trending',
  upcoming: 'Upcoming',
  airingToday: 'Airing Today',
  onTheAir: 'On The Air',
  
  // Content details
  watchNow: 'Watch Now',
  releaseDate: 'Release Date',
  firstAirDate: 'First Air Date',
  lastAirDate: 'Last Air Date',
  runtime: 'Runtime',
  rating: 'Rating',
  overview: 'Overview',
  genres: 'Genres',
  cast: 'Cast',
  crew: 'Crew',
  director: 'Director',
  writer: 'Writer',
  producer: 'Producer',
  
  // Person details
  knownFor: 'Known For',
  birthday: 'Birthday',
  deathday: 'Date of Death',
  placeOfBirth: 'Place of Birth',
  biography: 'Biography',
  popularity: 'Popularity',
  allCredits: 'All Credits',
  filmography: 'Filmography',
  
  // TV Show details
  seasons: 'Seasons',
  episodes: 'Episodes',
  season: 'Season',
  episode: 'Episode',
  numberOfSeasons: 'Number of Seasons',
  numberOfEpisodes: 'Number of Episodes',
  status: 'Status',
  network: 'Network',
  type: 'Type',
  
  // Common UI
  loading: 'Loading...',
  error: 'Error loading content',
  loadMore: 'Load More',
  viewAll: 'View All',
  year: 'Year',
  years: 'Years',
  minute: 'minute',
  minutes: 'minutes',
  page: 'Page',
  of: 'of',
  results: 'results',
  noResults: 'No results found',
  tryAgain: 'Try Again',
  
  // Language and settings
  language: 'Language',
  languageDetected: 'Language Detected',
  settings: 'Settings',
  preferences: 'Preferences',
  
  // TMDb Attribution
  tmdbAttribution: 'This product uses the TMDb API but is not endorsed or certified by TMDb.',
  poweredByTmdb: 'Powered by TMDb',
  
  // Search
  searchResults: 'Search Results',
  searchFor: 'Search for',
  noSearchResults: 'No results found for your search',
  
  // Filters
  sortBy: 'Sort By',
  filterBy: 'Filter By',
  releaseYear: 'Release Year',
  genre: 'Genre',
  country: 'Country',
  
  // Actions
  play: 'Play',
  trailer: 'Trailer',
  favorite: 'Favorite',
  watchlist: 'Watchlist',
  share: 'Share',
  download: 'Download',
  
  // Quality
  quality: 'Quality',
  resolution: 'Resolution',
  hd: 'HD',
  fullHD: '1080p',
  ultraHD: '4K',
  
  // Time
  today: 'Today',
  thisWeek: 'This Week',
  thisMonth: 'This Month',
  thisYear: 'This Year',
};

// Language configurations with comprehensive translations
export const SUPPORTED_LANGUAGES: Record<string, LanguageConfig> = {
  // English (Default)
  en: {
    code: 'en',
    tmdbCode: 'en-US',
    name: 'English',
    nativeName: 'English',
    flag: 'üá∫üá∏',
    region: 'US',
    translations: { ...baseTranslations }
  },

  // Spanish
  es: {
    code: 'es',
    tmdbCode: 'es-ES',
    name: 'Spanish',
    nativeName: 'Espa√±ol',
    flag: 'üá™üá∏',
    region: 'ES',
    translations: {
      ...baseTranslations,
      movies: 'Pel√≠culas',
      tvShows: 'Series de TV',
      people: 'Personas',
      search: 'Buscar pel√≠culas, series, personas...',
      
      trendingMovies: 'Pel√≠culas en Tendencia',
      popularMovies: 'Pel√≠culas Populares',
      trendingTVShows: 'Series en Tendencia',
      upcomingMovies: 'Pr√≥ximas Pel√≠culas',
      topRatedMovies: 'Pel√≠culas Mejor Valoradas',
      nowPlaying: 'En Cartelera',
      
      popular: 'Populares',
      topRated: 'Mejor Valoradas',
      trending: 'Tendencia',
      upcoming: 'Pr√≥ximas',
      airingToday: 'Hoy en Emisi√≥n',
      onTheAir: 'En Emisi√≥n',
      
      watchNow: 'Ver Ahora',
      releaseDate: 'Fecha de Estreno',
      firstAirDate: 'Fecha de Primera Emisi√≥n',
      lastAirDate: 'Fecha de √öltima Emisi√≥n',
      runtime: 'Duraci√≥n',
      rating: 'Calificaci√≥n',
      overview: 'Sinopsis',
      genres: 'G√©neros',
      cast: 'Reparto',
      crew: 'Equipo',
      director: 'Director',
      writer: 'Guionista',
      producer: 'Productor',
      
      knownFor: 'Conocido por',
      birthday: 'Cumplea√±os',
      deathday: 'Fecha de Fallecimiento',
      placeOfBirth: 'Lugar de Nacimiento',
      biography: 'Biograf√≠a',
      popularity: 'Popularidad',
      allCredits: 'Todos los Cr√©ditos',
      filmography: 'Filmograf√≠a',
      
      seasons: 'Temporadas',
      episodes: 'Episodios',
      season: 'Temporada',
      episode: 'Episodio',
      numberOfSeasons: 'N√∫mero de Temporadas',
      numberOfEpisodes: 'N√∫mero de Episodios',
      status: 'Estado',
      network: 'Cadena',
      type: 'Tipo',
      
      loading: 'Cargando...',
      error: 'Error al cargar contenido',
      loadMore: 'Cargar M√°s',
      viewAll: 'Ver Todo',
      year: 'A√±o',
      years: 'A√±os',
      minute: 'minuto',
      minutes: 'minutos',
      page: 'P√°gina',
      of: 'de',
      results: 'resultados',
      noResults: 'No se encontraron resultados',
      tryAgain: 'Intentar de Nuevo',
      
      language: 'Idioma',
      languageDetected: 'Idioma Detectado',
      settings: 'Configuraci√≥n',
      preferences: 'Preferencias',
      
      tmdbAttribution: 'Este producto usa la API de TMDb pero no est√° respaldado o certificado por TMDb.',
      poweredByTmdb: 'Desarrollado con TMDb',
      
      searchResults: 'Resultados de B√∫squeda',
      searchFor: 'Buscar',
      noSearchResults: 'No se encontraron resultados para tu b√∫squeda',
      
      sortBy: 'Ordenar Por',
      filterBy: 'Filtrar Por',
      releaseYear: 'A√±o de Estreno',
      genre: 'G√©nero',
      country: 'Pa√≠s',
      
      play: 'Reproducir',
      trailer: 'Tr√°iler',
      favorite: 'Favorito',
      watchlist: 'Lista de Seguimiento',
      share: 'Compartir',
      download: 'Descargar',
      
      quality: 'Calidad',
      resolution: 'Resoluci√≥n',
      hd: 'HD',
      fullHD: '1080p',
      ultraHD: '4K',
      
      today: 'Hoy',
      thisWeek: 'Esta Semana',
      thisMonth: 'Este Mes',
      thisYear: 'Este A√±o',
    }
  },

  // French
  fr: {
    code: 'fr',
    tmdbCode: 'fr-FR',
    name: 'French',
    nativeName: 'Fran√ßais',
    flag: 'üá´üá∑',
    region: 'FR',
    translations: {
      ...baseTranslations,
      movies: 'Films',
      tvShows: 'S√©ries TV',
      people: 'Personnes',
      search: 'Rechercher films, s√©ries, personnes...',
      
      trendingMovies: 'Films Tendance',
      popularMovies: 'Films Populaires',
      trendingTVShows: 'S√©ries Tendance',
      upcomingMovies: 'Films √† Venir',
      topRatedMovies: 'Films les Mieux Not√©s',
      nowPlaying: '√Ä l\'Affiche',
      
      popular: 'Populaires',
      topRated: 'Mieux Not√©s',
      trending: 'Tendance',
      upcoming: '√Ä Venir',
      airingToday: 'Diffus√©s Aujourd\'hui',
      onTheAir: 'En Cours',
      
      watchNow: 'Regarder',
      releaseDate: 'Date de Sortie',
      firstAirDate: 'Premi√®re Diffusion',
      lastAirDate: 'Derni√®re Diffusion',
      runtime: 'Dur√©e',
      rating: 'Note',
      overview: 'Synopsis',
      genres: 'Genres',
      cast: 'Distribution',
      crew: '√âquipe',
      director: 'R√©alisateur',
      writer: 'Sc√©nariste',
      producer: 'Producteur',
      
      knownFor: 'Connu pour',
      birthday: 'Anniversaire',
      deathday: 'Date de D√©c√®s',
      placeOfBirth: 'Lieu de Naissance',
      biography: 'Biographie',
      popularity: 'Popularit√©',
      allCredits: 'Tous les Cr√©dits',
      filmography: 'Filmographie',
      
      seasons: 'Saisons',
      episodes: '√âpisodes',
      season: 'Saison',
      episode: '√âpisode',
      numberOfSeasons: 'Nombre de Saisons',
      numberOfEpisodes: 'Nombre d\'√âpisodes',
      status: 'Statut',
      network: 'Cha√Æne',
      type: 'Type',
      
      loading: 'Chargement...',
      error: 'Erreur de chargement',
      loadMore: 'Charger Plus',
      viewAll: 'Voir Tout',
      year: 'Ann√©e',
      years: 'Ann√©es',
      minute: 'minute',
      minutes: 'minutes',
      page: 'Page',
      of: 'de',
      results: 'r√©sultats',
      noResults: 'Aucun r√©sultat trouv√©',
      tryAgain: 'R√©essayer',
      
      language: 'Langue',
      languageDetected: 'Langue D√©tect√©e',
      settings: 'Param√®tres',
      preferences: 'Pr√©f√©rences',
      
      tmdbAttribution: 'Ce produit utilise l\'API TMDb mais n\'est ni approuv√© ni certifi√© par TMDb.',
      poweredByTmdb: 'Propuls√© par TMDb',
      
      searchResults: 'R√©sultats de Recherche',
      searchFor: 'Rechercher',
      noSearchResults: 'Aucun r√©sultat trouv√© pour votre recherche',
      
      sortBy: 'Trier Par',
      filterBy: 'Filtrer Par',
      releaseYear: 'Ann√©e de Sortie',
      genre: 'Genre',
      country: 'Pays',
      
      play: 'Lire',
      trailer: 'Bande-annonce',
      favorite: 'Favori',
      watchlist: 'Liste de Suivi',
      share: 'Partager',
      download: 'T√©l√©charger',
      
      quality: 'Qualit√©',
      resolution: 'R√©solution',
      hd: 'HD',
      fullHD: '1080p',
      ultraHD: '4K',
      
      today: 'Aujourd\'hui',
      thisWeek: 'Cette Semaine',
      thisMonth: 'Ce Mois',
      thisYear: 'Cette Ann√©e',
    }
  },

  // German
  de: {
    code: 'de',
    tmdbCode: 'de-DE',
    name: 'German',
    nativeName: 'Deutsch',
    flag: 'üá©üá™',
    region: 'DE',
    translations: {
      ...baseTranslations,
      movies: 'Filme',
      tvShows: 'TV-Serien',
      people: 'Personen',
      search: 'Filme, Serien, Personen suchen...',
      
      trendingMovies: 'Trending Filme',
      popularMovies: 'Beliebte Filme',
      trendingTVShows: 'Trending Serien',
      upcomingMovies: 'Kommende Filme',
      topRatedMovies: 'Top Bewertete Filme',
      nowPlaying: 'Aktuell im Kino',
      
      popular: 'Beliebt',
      topRated: 'Top Bewertet',
      trending: 'Trending',
      upcoming: 'Kommend',
      airingToday: 'Heute im TV',
      onTheAir: 'Aktuell im TV',
      
      watchNow: 'Jetzt Ansehen',
      releaseDate: 'Erscheinungsdatum',
      firstAirDate: 'Erste Ausstrahlung',
      lastAirDate: 'Letzte Ausstrahlung',
      runtime: 'Laufzeit',
      rating: 'Bewertung',
      overview: 'Handlung',
      genres: 'Genres',
      cast: 'Besetzung',
      crew: 'Crew',
      director: 'Regisseur',
      writer: 'Drehbuchautor',
      producer: 'Produzent',
      
      knownFor: 'Bekannt f√ºr',
      birthday: 'Geburtstag',
      deathday: 'Todestag',
      placeOfBirth: 'Geburtsort',
      biography: 'Biographie',
      popularity: 'Popularit√§t',
      allCredits: 'Alle Auftritte',
      filmography: 'Filmographie',
      
      seasons: 'Staffeln',
      episodes: 'Episoden',
      season: 'Staffel',
      episode: 'Episode',
      numberOfSeasons: 'Anzahl Staffeln',
      numberOfEpisodes: 'Anzahl Episoden',
      status: 'Status',
      network: 'Sender',
      type: 'Typ',
      
      loading: 'L√§dt...',
      error: 'Fehler beim Laden',
      loadMore: 'Mehr Laden',
      viewAll: 'Alle Anzeigen',
      year: 'Jahr',
      years: 'Jahre',
      minute: 'Minute',
      minutes: 'Minuten',
      page: 'Seite',
      of: 'von',
      results: 'Ergebnisse',
      noResults: 'Keine Ergebnisse gefunden',
      tryAgain: 'Erneut Versuchen',
      
      language: 'Sprache',
      languageDetected: 'Sprache Erkannt',
      settings: 'Einstellungen',
      preferences: 'Einstellungen',
      
      tmdbAttribution: 'Dieses Produkt nutzt die TMDb API, ist aber nicht von TMDb unterst√ºtzt oder zertifiziert.',
      poweredByTmdb: 'Unterst√ºtzt von TMDb',
      
      searchResults: 'Suchergebnisse',
      searchFor: 'Suchen nach',
      noSearchResults: 'Keine Ergebnisse f√ºr Ihre Suche gefunden',
      
      sortBy: 'Sortieren Nach',
      filterBy: 'Filtern Nach',
      releaseYear: 'Erscheinungsjahr',
      genre: 'Genre',
      country: 'Land',
      
      play: 'Abspielen',
      trailer: 'Trailer',
      favorite: 'Favorit',
      watchlist: 'Watchlist',
      share: 'Teilen',
      download: 'Herunterladen',
      
      quality: 'Qualit√§t',
      resolution: 'Aufl√∂sung',
      hd: 'HD',
      fullHD: '1080p',
      ultraHD: '4K',
      
      today: 'Heute',
      thisWeek: 'Diese Woche',
      thisMonth: 'Diesen Monat',
      thisYear: 'Dieses Jahr',
    }
  },

  // Italian
  it: {
    code: 'it',
    tmdbCode: 'it-IT',
    name: 'Italian',
    nativeName: 'Italiano',
    flag: 'üáÆüáπ',
    region: 'IT',
    translations: {
      ...baseTranslations,
      movies: 'Film',
      tvShows: 'Serie TV',
      people: 'Persone',
      search: 'Cerca film, serie TV, persone...',
      
      trendingMovies: 'Film di Tendenza',
      popularMovies: 'Film Popolari',
      trendingTVShows: 'Serie TV di Tendenza',
      upcomingMovies: 'Prossimi Film',
      topRatedMovies: 'Film Pi√π Votati',
      nowPlaying: 'Al Cinema',
      
      popular: 'Popolari',
      topRated: 'Pi√π Votati',
      trending: 'Di Tendenza',
      upcoming: 'In Arrivo',
      airingToday: 'In Onda Oggi',
      onTheAir: 'In Onda',
      
      watchNow: 'Guarda Ora',
      releaseDate: 'Data di Uscita',
      runtime: 'Durata',
      rating: 'Valutazione',
      overview: 'Trama',
      genres: 'Generi',
      cast: 'Cast',
      
      loading: 'Caricamento...',
      error: 'Errore nel caricamento',
      loadMore: 'Carica Altri',
      year: 'Anno',
      language: 'Lingua',
    }
  },

  // Portuguese
  pt: {
    code: 'pt',
    tmdbCode: 'pt-BR',
    name: 'Portuguese',
    nativeName: 'Portugu√™s',
    flag: 'üáßüá∑',
    region: 'BR',
    translations: {
      ...baseTranslations,
      movies: 'Filmes',
      tvShows: 'S√©ries de TV',
      people: 'Pessoas',
      search: 'Pesquisar filmes, s√©ries, pessoas...',
      
      trendingMovies: 'Filmes em Alta',
      popularMovies: 'Filmes Populares',
      trendingTVShows: 'S√©ries em Alta',
      
      popular: 'Populares',
      topRated: 'Mais Votados',
      trending: 'Em Alta',
      upcoming: 'Pr√≥ximos',
      
      watchNow: 'Assistir Agora',
      releaseDate: 'Data de Lan√ßamento',
      runtime: 'Dura√ß√£o',
      rating: 'Avalia√ß√£o',
      overview: 'Sinopse',
      
      loading: 'Carregando...',
      error: 'Erro ao carregar',
      loadMore: 'Carregar Mais',
      year: 'Ano',
      language: 'Idioma',
    }
  },

  // Russian
  ru: {
    code: 'ru',
    tmdbCode: 'ru-RU',
    name: 'Russian',
    nativeName: '–†—É—Å—Å–∫–∏–π',
    flag: 'üá∑üá∫',
    region: 'RU',
    translations: {
      ...baseTranslations,
      movies: '–§–∏–ª—å–º—ã',
      tvShows: '–°–µ—Ä–∏–∞–ª—ã',
      people: '–õ—é–¥–∏',
      search: '–ü–æ–∏—Å–∫ —Ñ–∏–ª—å–º–æ–≤, —Å–µ—Ä–∏–∞–ª–æ–≤, –∞–∫—Ç—ë—Ä–æ–≤...',
      
      trendingMovies: '–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –§–∏–ª—å–º—ã',
      popularMovies: '–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –§–∏–ª—å–º—ã',
      trendingTVShows: '–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –°–µ—Ä–∏–∞–ª—ã',
      
      popular: '–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ',
      topRated: '–¢–æ–ø –†–µ–π—Ç–∏–Ω–≥',
      trending: '–í –¢—Ä–µ–Ω–¥–µ',
      upcoming: '–°–∫–æ—Ä–æ',
      
      watchNow: '–°–º–æ—Ç—Ä–µ—Ç—å',
      releaseDate: '–î–∞—Ç–∞ –í—ã—Ö–æ–¥–∞',
      runtime: '–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å',
      rating: '–†–µ–π—Ç–∏–Ω–≥',
      overview: '–û–ø–∏—Å–∞–Ω–∏–µ',
      
      loading: '–ó–∞–≥—Ä—É–∑–∫–∞...',
      error: '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏',
      loadMore: '–ó–∞–≥—Ä—É–∑–∏—Ç—å –ï—â—ë',
      year: '–ì–æ–¥',
      language: '–Ø–∑—ã–∫',
    }
  },

  // Japanese
  ja: {
    code: 'ja',
    tmdbCode: 'ja-JP',
    name: 'Japanese',
    nativeName: 'Êó•Êú¨Ë™û',
    flag: 'üáØüáµ',
    region: 'JP',
    translations: {
      ...baseTranslations,
      movies: 'Êò†Áîª',
      tvShows: '„ÉÜ„É¨„ÉìÁï™ÁµÑ',
      people: '‰∫∫Áâ©',
      search: 'Êò†Áîª„ÄÅ„ÉÜ„É¨„ÉìÁï™ÁµÑ„ÄÅ‰∫∫Áâ©„ÇíÊ§úÁ¥¢...',
      
      trendingMovies: '„Éà„É¨„É≥„ÉâÊò†Áîª',
      popularMovies: '‰∫∫Ê∞óÊò†Áîª',
      trendingTVShows: '„Éà„É¨„É≥„ÉâTVÁï™ÁµÑ',
      
      popular: '‰∫∫Ê∞ó',
      topRated: 'È´òË©ï‰æ°',
      trending: '„Éà„É¨„É≥„Éâ',
      upcoming: 'ÂÖ¨Èñã‰∫àÂÆö',
      
      watchNow: '‰ªä„Åô„ÅêË¶ñËÅ¥',
      releaseDate: 'ÂÖ¨ÈñãÊó•',
      runtime: '‰∏äÊò†ÊôÇÈñì',
      rating: 'Ë©ï‰æ°',
      overview: '„ÅÇ„Çâ„Åô„Åò',
      
      loading: 'Ë™≠„ÅøËæº„Åø‰∏≠...',
      error: 'Ë™≠„ÅøËæº„Åø„Ç®„É©„Éº',
      loadMore: '„ÇÇ„Å£„Å®Ë¶ã„Çã',
      year: 'Âπ¥',
      language: 'Ë®ÄË™û',
    }
  },

  // Korean
  ko: {
    code: 'ko',
    tmdbCode: 'ko-KR',
    name: 'Korean',
    nativeName: 'ÌïúÍµ≠Ïñ¥',
    flag: 'üá∞üá∑',
    region: 'KR',
    translations: {
      ...baseTranslations,
      movies: 'ÏòÅÌôî',
      tvShows: 'TV ÌîÑÎ°úÍ∑∏Îû®',
      people: 'Ïù∏Î¨º',
      search: 'ÏòÅÌôî, TV ÌîÑÎ°úÍ∑∏Îû®, Ïù∏Î¨º Í≤ÄÏÉâ...',
      
      trendingMovies: 'Ïù∏Í∏∞ ÏòÅÌôî',
      popularMovies: 'Ïù∏Í∏∞ ÏòÅÌôî',
      trendingTVShows: 'Ïù∏Í∏∞ TV ÌîÑÎ°úÍ∑∏Îû®',
      
      popular: 'Ïù∏Í∏∞',
      topRated: 'ÌèâÏ†ê ÎÜíÏùÄ',
      trending: 'Ïù∏Í∏∞ ÏÉÅÏäπ',
      upcoming: 'Í∞úÎ¥â ÏòàÏ†ï',
      
      watchNow: 'ÏßÄÍ∏à ÏãúÏ≤≠',
      releaseDate: 'Í∞úÎ¥âÏùº',
      runtime: 'ÏÉÅÏòÅÏãúÍ∞Ñ',
      rating: 'ÌèâÏ†ê',
      overview: 'Ï§ÑÍ±∞Î¶¨',
      
      loading: 'Î°úÎî© Ï§ë...',
      error: 'Î°úÎî© Ïò§Î•ò',
      loadMore: 'Îçî Î≥¥Í∏∞',
      year: 'ÎÖÑ',
      language: 'Ïñ∏Ïñ¥',
    }
  },

  // Chinese Simplified
  zh: {
    code: 'zh',
    tmdbCode: 'zh-CN',
    name: 'Chinese (Simplified)',
    nativeName: '‰∏≠Êñá(ÁÆÄ‰Ωì)',
    flag: 'üá®üá≥',
    region: 'CN',
    translations: {
      ...baseTranslations,
      movies: 'ÁîµÂΩ±',
      tvShows: 'ÁîµËßÜÂâß',
      people: '‰∫∫Áâ©',
      search: 'ÊêúÁ¥¢ÁîµÂΩ±„ÄÅÁîµËßÜÂâß„ÄÅ‰∫∫Áâ©...',
      
      trendingMovies: 'ÁÉ≠Èó®ÁîµÂΩ±',
      popularMovies: 'ÁÉ≠Èó®ÁîµÂΩ±',
      trendingTVShows: 'ÁÉ≠Èó®ÁîµËßÜÂâß',
      
      popular: 'ÁÉ≠Èó®',
      topRated: 'È´òËØÑÂàÜ',
      trending: 'ÁÉ≠Èó®Ë∂ãÂäø',
      upcoming: 'Âç≥Â∞Ü‰∏äÊò†',
      
      watchNow: 'Á´ãÂç≥ËßÇÁúã',
      releaseDate: '‰∏äÊò†Êó•Êúü',
      runtime: 'Êó∂Èïø',
      rating: 'ËØÑÂàÜ',
      overview: 'ÁÆÄ‰ªã',
      
      loading: 'Âä†ËΩΩ‰∏≠...',
      error: 'Âä†ËΩΩÈîôËØØ',
      loadMore: 'Âä†ËΩΩÊõ¥Â§ö',
      year: 'Âπ¥',
      language: 'ËØ≠Ë®Ä',
    }
  },

  // Arabic
  ar: {
    code: 'ar',
    tmdbCode: 'ar-SA',
    name: 'Arabic',
    nativeName: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©',
    flag: 'üá∏üá¶',
    region: 'SA',
    rtl: true,
    translations: {
      ...baseTranslations,
      movies: 'ÿ£ŸÅŸÑÿßŸÖ',
      tvShows: 'ŸÖÿ≥ŸÑÿ≥ŸÑÿßÿ™',
      people: 'ÿ£ÿ¥ÿÆÿßÿµ',
      search: 'ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿ£ŸÅŸÑÿßŸÖÿå ŸÖÿ≥ŸÑÿ≥ŸÑÿßÿ™ÿå ÿ£ÿ¥ÿÆÿßÿµ...',
      
      trendingMovies: 'ÿ£ŸÅŸÑÿßŸÖ ÿ±ÿßÿ¶ÿ¨ÿ©',
      popularMovies: 'ÿ£ŸÅŸÑÿßŸÖ ÿ¥ÿßÿ¶ÿπÿ©',
      trendingTVShows: 'ŸÖÿ≥ŸÑÿ≥ŸÑÿßÿ™ ÿ±ÿßÿ¶ÿ¨ÿ©',
      
      popular: 'ÿ¥ÿßÿ¶ÿπ',
      topRated: 'ÿßŸÑÿ£ÿπŸÑŸâ ÿ™ŸÇŸäŸäŸÖÿßŸã',
      trending: 'ÿ±ÿßÿ¶ÿ¨',
      upcoming: 'ŸÇÿ±Ÿäÿ®ÿßŸã',
      
      watchNow: 'ÿ¥ÿßŸáÿØ ÿßŸÑÿ¢ŸÜ',
      releaseDate: 'ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ•ÿµÿØÿßÿ±',
      runtime: 'ÿßŸÑŸÖÿØÿ©',
      rating: 'ÿßŸÑÿ™ŸÇŸäŸäŸÖ',
      overview: 'ŸÜÿ®ÿ∞ÿ©',
      
      loading: 'ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...',
      error: 'ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ',
      loadMore: 'ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ≤ŸäÿØ',
      year: 'ÿ≥ŸÜÿ©',
      language: 'ÿßŸÑŸÑÿ∫ÿ©',
    }
  },

  // Hindi
  hi: {
    code: 'hi',
    tmdbCode: 'hi-IN',
    name: 'Hindi',
    nativeName: '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä',
    flag: 'üáÆüá≥',
    region: 'IN',
    translations: {
      ...baseTranslations,
      movies: '‡§´‡§º‡§ø‡§≤‡•ç‡§Æ‡•á‡§Ç',
      tvShows: '‡§ü‡•Ä‡§µ‡•Ä ‡§∂‡•ã',
      people: '‡§≤‡•ã‡§ó',
      search: '‡§´‡§º‡§ø‡§≤‡•ç‡§Æ‡•á‡§Ç, ‡§ü‡•Ä‡§µ‡•Ä ‡§∂‡•ã, ‡§≤‡•ã‡§ó ‡§ñ‡•ã‡§ú‡•á‡§Ç...',
      
      trendingMovies: '‡§ö‡§≤‡§® ‡§Æ‡•á‡§Ç ‡§´‡§º‡§ø‡§≤‡•ç‡§Æ‡•á‡§Ç',
      popularMovies: '‡§≤‡•ã‡§ï‡§™‡•ç‡§∞‡§ø‡§Ø ‡§´‡§º‡§ø‡§≤‡•ç‡§Æ‡•á‡§Ç',
      trendingTVShows: '‡§ö‡§≤‡§® ‡§Æ‡•á‡§Ç ‡§ü‡•Ä‡§µ‡•Ä ‡§∂‡•ã',
      
      popular: '‡§≤‡•ã‡§ï‡§™‡•ç‡§∞‡§ø‡§Ø',
      topRated: '‡§â‡§ö‡•ç‡§ö ‡§∞‡•á‡§ü‡•á‡§°',
      trending: '‡§ö‡§≤‡§® ‡§Æ‡•á‡§Ç',
      upcoming: '‡§Ü‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä',
      
      watchNow: '‡§Ö‡§≠‡•Ä ‡§¶‡•á‡§ñ‡•á‡§Ç',
      releaseDate: '‡§∞‡§ø‡§≤‡•Ä‡§ú‡§º ‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï',
      runtime: '‡§Ö‡§µ‡§ß‡§ø',
      rating: '‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó',
      overview: '‡§∏‡§æ‡§∞‡§æ‡§Ç‡§∂',
      
      loading: '‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...',
      error: '‡§≤‡•ã‡§°‡§ø‡§Ç‡§ó ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø',
      loadMore: '‡§î‡§∞ ‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç',
      year: '‡§µ‡§∞‡•ç‡§∑',
      language: '‡§≠‡§æ‡§∑‡§æ',
    }
  },

  // Turkish
  tr: {
    code: 'tr',
    tmdbCode: 'tr-TR',
    name: 'Turkish',
    nativeName: 'T√ºrk√ße',
    flag: 'üáπüá∑',
    region: 'TR',
    translations: {
      ...baseTranslations,
      movies: 'Filmler',
      tvShows: 'TV Dizileri',
      people: 'Ki≈üiler',
      search: 'Film, dizi, ki≈üi ara...',
      
      trendingMovies: 'Trend Filmler',
      popularMovies: 'Pop√ºler Filmler',
      trendingTVShows: 'Trend Diziler',
      
      popular: 'Pop√ºler',
      topRated: 'En Y√ºksek Puanlƒ±',
      trending: 'Trend',
      upcoming: 'Yakƒ±nda',
      
      watchNow: '≈ûimdi ƒ∞zle',
      releaseDate: '√áƒ±kƒ±≈ü Tarihi',
      runtime: 'S√ºre',
      rating: 'Puan',
      overview: '√ñzet',
      
      loading: 'Y√ºkleniyor...',
      error: 'Y√ºkleme hatasƒ±',
      loadMore: 'Daha Fazla Y√ºkle',
      year: 'Yƒ±l',
      language: 'Dil',
    }
  },

  // Dutch
  nl: {
    code: 'nl',
    tmdbCode: 'nl-NL',
    name: 'Dutch',
    nativeName: 'Nederlands',
    flag: 'üá≥üá±',
    region: 'NL',
    translations: {
      ...baseTranslations,
      movies: 'Films',
      tvShows: 'TV-series',
      people: 'Personen',
      search: 'Zoek films, tv-series, personen...',
      
      trendingMovies: 'Trending Films',
      popularMovies: 'Populaire Films',
      trendingTVShows: 'Trending TV-series',
      
      popular: 'Populair',
      topRated: 'Hoogst Beoordeeld',
      trending: 'Trending',
      upcoming: 'Binnenkort',
      
      watchNow: 'Nu Kijken',
      releaseDate: 'Release Datum',
      runtime: 'Speelduur',
      rating: 'Beoordeling',
      overview: 'Overzicht',
      
      loading: 'Laden...',
      error: 'Laad fout',
      loadMore: 'Meer Laden',
      year: 'Jaar',
      language: 'Taal',
    }
  },
};

export const DEFAULT_LANGUAGE = 'en';

interface LanguageStore {
  currentLanguage: string;
  isLoading: boolean;
  setLanguage: (languageCode: string) => void;
  detectLanguage: () => void;
  getTranslation: (key: string) => string;
  getCurrentLanguageConfig: () => LanguageConfig;
  getSupportedLanguages: () => Record<string, LanguageConfig>;
  getTMDbLanguageCode: () => string;
  getRegion: () => string;
  isRTL: () => boolean;
}

export const useLanguageStore = create<LanguageStore>()(
  persist(
    (set, get) => ({
      currentLanguage: DEFAULT_LANGUAGE,
      isLoading: false,

      setLanguage: (languageCode: string) => {
        if (SUPPORTED_LANGUAGES[languageCode]) {
          set({ currentLanguage: languageCode });
          
          // Apply RTL styles if needed
          const config = SUPPORTED_LANGUAGES[languageCode];
          if (config.rtl) {
            document.documentElement.dir = 'rtl';
            document.documentElement.lang = languageCode;
          } else {
            document.documentElement.dir = 'ltr';
            document.documentElement.lang = languageCode;
          }
          
          // Dispatch custom event for components that need to react
          window.dispatchEvent(new CustomEvent('languageChanged', {
            detail: languageCode
          }));
        }
      },

      detectLanguage: () => {
        const browserLang = navigator.language.split('-')[0];
        const supportedLang = SUPPORTED_LANGUAGES[browserLang] ? browserLang : DEFAULT_LANGUAGE;
        
        const currentLang = get().currentLanguage;
        if (currentLang === DEFAULT_LANGUAGE && supportedLang !== DEFAULT_LANGUAGE) {
          get().setLanguage(supportedLang);
        }
      },

      getTranslation: (key: string) => {
        const { currentLanguage } = get();
        const config = SUPPORTED_LANGUAGES[currentLanguage] || SUPPORTED_LANGUAGES[DEFAULT_LANGUAGE];
        const translations = config.translations;
        
        // Support nested keys with dot notation (e.g., 'user.profile.name')
        const keys = key.split('.');
        let value: any = translations;
        
        for (const k of keys) {
          value = value[k];
          if (value === undefined) {
            // Fallback to English if key not found
            const englishTranslations = SUPPORTED_LANGUAGES[DEFAULT_LANGUAGE].translations;
            let englishValue: any = englishTranslations;
            for (const ek of keys) {
              englishValue = englishValue[ek];
              if (englishValue === undefined) return key; // Return key itself if not found
            }
            return String(englishValue);
          }
        }
        
        return String(value);
      },

      getCurrentLanguageConfig: () => {
        const { currentLanguage } = get();
        return SUPPORTED_LANGUAGES[currentLanguage] || SUPPORTED_LANGUAGES[DEFAULT_LANGUAGE];
      },

      getSupportedLanguages: () => SUPPORTED_LANGUAGES,

      getTMDbLanguageCode: () => {
        const config = get().getCurrentLanguageConfig();
        return config.tmdbCode;
      },

      getRegion: () => {
        const config = get().getCurrentLanguageConfig();
        return config.region || 'US';
      },

      isRTL: () => {
        const config = get().getCurrentLanguageConfig();
        return config.rtl || false;
      },
    }),
    {
      name: 'language-store',
      storage: createJSONStorage(() => localStorage),
      partialize: (state) => ({ currentLanguage: state.currentLanguage }),
    }
  )
);

// Initialize language detection on app start
export const initializeLanguage = () => {
  const store = useLanguageStore.getState();
  store.detectLanguage();
};

// Hook for components to use translations
export const useTranslation = () => {
  const { 
    currentLanguage, 
    getTranslation, 
    setLanguage, 
    getCurrentLanguageConfig,
    getSupportedLanguages,
    getTMDbLanguageCode,
    getRegion,
    isRTL
  } = useLanguageStore();

  return {
    t: getTranslation,
    currentLanguage,
    setLanguage,
    languageConfig: getCurrentLanguageConfig(),
    supportedLanguages: getSupportedLanguages(),
    tmdbLanguageCode: getTMDbLanguageCode(),
    region: getRegion(),
    isRTL: isRTL(),
  };
};
